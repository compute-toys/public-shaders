fn d(P:vec3f)->vec3f{var Y=P+vec3f(12.34,56.78,90.12);var a=fract(Y*vec3f(0.1031,0.1030,0.0973));a=a+dot(a,a.yzx+19.19);return fract(vec3f(a.x+a.y,a.y+a.z,a.z+a.x)*a.zxy);}fn aa(r:f32)->mat2x2<f32>{let p:f32=sin(r);let o:f32=cos(r);return mat2x2(o,-p,p,o);}fn x(T:vec3<f32>,R:f32)->f32{return length(T)-R;}fn ba(i:vec3f)->f32{let z=0.05;let A=0.1;let N=0.2;let I=d(i*z).x;let G=d(i*A+vec3f(100.0)).x;let F=d(i*N+vec3f(200.0)).x;var j=I*0.5+G*0.3+F*0.2;j=smoothstep(0.4,0.7,j);return j;}fn y(n:vec3<f32>)->f32{let g=10.0;let l=vec3<i32>(floor(n/g));let k=d(vec3f(f32(l.x)*7.1,f32(l.y)*11.3,f32(l.z)*13.7));let O=0.3;if (k.x>=O){return g*0.5;}var m=(n/g);m=fract(m)-0.5;let B=(k.yzx-vec3f(0.5))*0.666;let C=(vec3f(m)+B);let D=mix(0.004,0.010,k.z);let E=x(C,D);return E*g;}@compute @workgroup_size(16,16) fn main_image(@builtin(global_invocation_id) e:vec3u){let c=textureDimensions(screen);if (e.x>=c.x||e.y>=c.y){return;}let H=vec2f(f32(e.x)+.5,f32(c.y-e.y)-.5);let q=(H*2.0-vec2f(f32(c.x),f32(c.y)))/f32(c.y);let J=5.0+custom.speed*100.0;let K=0.20;let L=vec3f(0,0,-3+time.elapsed*J);let M=normalize(vec3f(q*K,1));var f=0.0;var b=vec3<f32>(0);let v=vec3f(1.0,0.9,0.8)*1.5;let Q=vec3f(1.0,0.4,0.1);let w:i32=180;let S=f32(w)-1.0;for(var t:i32=0;t<w;t++){var U=L+M*f;var h=y(U);let W=100.0;let X=150.0;let s=1.0-smoothstep(W,X,f);if (h<1.0){let Z=0.03;let V=30.0;b+=Q*Z*exp(-h*V)*s;}if (h<0.001){b+=v*s;break;}f+=h;if (f>S){let u=d(normalize(vec3f(q,1))*100.0).x;if (u>0.998){b+=v*(u-0.998)*50.0;}break;}if (f>1000.0){break;}}b=b/(b+1.0);b=pow(b,vec3f(1.0/2.2));textureStore(screen,e.xy,vec4f(b,1.));}